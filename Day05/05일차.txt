따로 복습할 때
- mariadb
- postgresdb
- DBeaver
를 설치한 뒤
초기 설정했던 비밀번호(eric@0621) 입력


<postgresdb>

* SQL

// table 정보

drop table public.users;
CREATE TABLE public.users (
	idx serial not NULL, -- 시퀸스
	"name" varchar(100) not NULL, -- 이름
	id varchar(100) not NULL, -- 아이디
	"passwd" varchar(50) not NULL, -- 비밀번호
	gender bpchar(1) not NULL, -- 성별
	birth varchar(10) not NULL, -- 생일
	phone varchar(20) not NULL, -- 연락처
	rgstdate timestamp not null default now(), -- 등록일
	modifydate timestamp null, -- 수정일
	active bool not null default true -- 회원상태
);

COMMENT ON TABLE public."userinfo" IS '회원 정보';

-- Column comments

COMMENT ON COLUMN public."userinfo".idx IS '시퀸스';
COMMENT ON COLUMN public."userinfo"."name" IS '이름';
COMMENT ON COLUMN public."userinfo".id IS '아이디';
COMMENT ON COLUMN public."userinfo"."password" IS '비밀번호';
COMMENT ON COLUMN public."userinfo".gender IS '성별';
COMMENT ON COLUMN public."userinfo".birth IS '생년월일';
COMMENT ON COLUMN public."userinfo".phone IS '전화번호';
COMMENT ON COLUMN public."userinfo".rgstdate IS '등록일';
COMMENT ON COLUMN public."userinfo".modifydate IS '수정일';

// SQL 창에서 데이터 추가하는 방법

insert into userinfo(idx)
values(1);

insert into userinfo(name)
values('이카루스');

update userinfo set name='을지문덕'
,id='goodman', birth='한글한글'
where idx = 1;

update users set active = true;

delete from users where idx = 3;

select max(idx)+1 from userinfo;

insert into users(name, id, passwd, gender, birth, phone),
values('이카루스', 'icarus', '12345', '1', '2000-05', '010-1111-2222');

insert into users(name, id, passwd, gender, birth, phone),
values('신사임당', 'shinsaimdang', '06789', '2', '1956-01', '010-2222-3333');

delete from userinfo;

ALTER TABLE public.userinfo ALTER COLUMN idx SET NOT NULL;

idx not Null에 체크하고 실행하는 경우
SQL Error [23502]: 오류: "idx" 칼럼(해당 릴레이션 "userinfo")의 null 값이 not null 제약조건을 위반했습니다.
  Detail: 실패한 자료: (null, 이카루스, null, null, null, null, null, null, null)

<기준값을 잡을 때>

방법 1.  쿼리를 2번 돌림
select max(idx) from userinfo;

방법 2.
values((select max(idx)+1 from userinfo)), '이카루스');
>> values((select max(idx)+1 from userinfo)), '이카루스2');

<delete하는 방법>

1. 일정 데이터만 delete: delete from userinfo where idx = 3;
오류: 삭제한 사용자의 게시판, 결제 기록이 연결이 되지 않아 붕 떠 버리는 현상이 발생한다.

2. 테이블에서 칼럼 마지막에 active (Data type: bool)를 추가해주고 sql에 update userinfo set active = true; // active = true 입력

<테이블을 삭제하고 데이터를 넣을 때 등록일 날짜 시간 자동입력>

drop table public.userinfo;
; (userinfo: 테이블명)
CREATE TABLE public.userinfo (
	idx serial not NULL,
	"name" varchar(100) not NULL,
	id varchar(100) not NULL,
	"passwd" varchar(50) not NULL,
	gender bpchar(1) not NULL,
	birth varchar(10) not NULL,
	phone varchar(20) not NULL,
	rgstdate timestamp not null default now(),
	modifydate timestamp null,
	active bool default true
);